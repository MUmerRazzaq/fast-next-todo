# Generating Migrations

## 1. Autogenerate

Alembic can compare the current state of your database with your SQLAlchemy models and automatically generate a migration script.

```bash
alembic revision --autogenerate -m "Add user table"
```

**How it works:**
- Alembic connects to the database and inspects its schema.
- It compares this schema to the `target_metadata` you defined in `env.py`.
- It generates the upgrade and downgrade operations for any differences found.

**Important:** Always review autogenerated migrations. They are not perfect and might miss complex changes like constraint name changes or server defaults.

## 2. Manual Migration

For changes that autogenerate can't handle or for data migrations, you can create an empty migration file.

```bash
alembic revision -m "Populate initial user data"
```

This creates a new migration file with empty `upgrade()` and `downgrade()` functions. You can then fill in the required operations using Alembic's `op` object.
